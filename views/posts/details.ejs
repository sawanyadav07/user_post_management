<% layout("layouts/main") %>
<h2><%= post.title %></h2>
<p><%= post.content %></p>
<p><small>By <%= post.userId.username %> on <%= post.createdAt.toDateString() %></small></p>

<hr>

<h3>Likes (<%= likes.length %>)</h3>
<ul>
  <% likes.forEach(like => { %>
    <li><%= like.userId.username %></li>
  <% }) %>
</ul>

<form action="/likes/like" method="POST">
  <input type="hidden" name="postId" value="<%= post._id %>">
  <button type="submit">Like</button>
</form>

<hr>

<h3>Comments</h3>
<ul>
  <% comments.forEach(comment => { %>
    <li><b><%= comment.userId.username %>:</b> <%= comment.text %></li>
  <% }) %>
</ul>

<form action="/comments/create" method="POST">
  <input type="hidden" name="postId" value="<%= post._id %>">
  <textarea name="text" required></textarea><br>
  <button type="submit">Add Comment</button>
</form>
